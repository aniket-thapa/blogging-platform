<script
  src="https://kit.fontawesome.com/9ca9aa7819.js"
  crossorigin="anonymous"
></script>

<nav class="bg-white dark:bg-gray-800 shadow-md py-4 relative">
  <div class="container mx-auto px-4 flex justify-between items-center">
    <!-- Logo -->
    <a
      href="/"
      class="text-2xl font-bold text-gray-800 dark:text-gray-100 hover:text-blue-500"
    >
      Let's <span class="text-blue-500">Blog</span>
    </a>

    <!-- Hamburger Menu (Hidden by Default) -->
    <button
      id="menu-toggle"
      class="text-gray-800 dark:text-gray-100 block sm:hidden focus:outline-none self-end"
    >
      <i class="fas fa-bars text-2xl"></i>
    </button>

    <!-- Nav Links -->
    <ul
      id="nav-links"
      class="hidden font-semibold text-base absolute sm:relative top-full left-0 w-full sm:w-auto bg-white dark:bg-gray-800 sm:bg-transparent shadow-md sm:shadow-none z-50 sm:flex space-y-4 sm:space-y-0 sm:space-x-6 flex-col sm:flex-row"
    >
      <li>
        <a
          href="/"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          Home
        </a>
      </li>
      <li>
        <a
          href="/blogs"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          Blogs
        </a>
      </li>
      <% if(user!== null){ %>
      <li>
        <a
          href="/blogs/new"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          New Blog
        </a>
      </li>
      <li>
        <a
          href="/user/profile"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          Profile
        </a>
      </li>
      <li>
        <a
          href="/logout"
          class="block text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-opacity-50 hover:bg-red-100 dark:hover:bg-red-800 dark:hover:bg-opacity-20 rounded-lg transition py-2 px-4"
        >
          Logout
        </a>
      </li>
      <% } else {%>
      <li>
        <a
          href="/login"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          Login
        </a>
      </li>
      <li>
        <a
          href="/register"
          class="block text-gray-700 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-300 hover:bg-opacity-50 hover:bg-blue-100 dark:hover:bg-sky-500 dark:hover:bg-opacity-10 rounded-lg transition py-2 px-4"
        >
          Register
        </a>
      </li>
      <% } %>
    </ul>

    <!-- Dark Mode Toggle Switch -->
    <button
      id="darkModeToggle"
      class="bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 shadow-xl px-2 py-1 rounded-full flex items-center transition-all duration-200"
    >
      <!-- Sun Icon -->
      <i
        id="sunIcon"
        class="fas fa-sun text-yellow-500 text-lg transition-all transform scale-100 dark:scale-0"
      ></i>

      <!-- Toggle Background -->
      <div
        class="relative w-12 h-6 mx-2 rounded-full bg-gray-400 dark:bg-gray-600 transition-all duration-300"
      >
        <!-- Toggle Circle -->
        <div
          id="toggleCircle"
          class="absolute top-1 left-1 w-4 h-4 bg-white dark:bg-gray-900 rounded-full shadow-md transform transition-all duration-300 dark:translate-x-6"
        ></div>
      </div>

      <!-- Moon Icon -->
      <i
        id="moonIcon"
        class="fas fa-moon text-blue-400 text-lg transition-all transform scale-0 dark:scale-100"
      ></i>
    </button>
  </div>
</nav>

<script>
  // Toggle the Menu-bar for small screens
  document.addEventListener('DOMContentLoaded', () => {
    const menuToggle = document.getElementById('menu-toggle');
    const navLinks = document.getElementById('nav-links');

    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('hidden');
    });
    document.addEventListener('click', function (event) {
      if (!navLinks.parentElement.contains(event.target)) {
        navLinks.classList.add('hidden');
      }
    });
  });

  // Dark Mode Toggle Script
  const darkModeToggle = document.getElementById('darkModeToggle');
  const sunIcon = document.getElementById('sunIcon');
  const moonIcon = document.getElementById('moonIcon');
  const toggleCircle = document.querySelector('#toggleCircle');

  function enableDarkMode() {
    document.documentElement.classList.add('dark');
    localStorage.setItem('theme', 'dark');
    toggleCircle.classList.add('translate-x-6');
    sunIcon.classList.add('scale-0');
    moonIcon.classList.remove('scale-0');
  }

  function disableDarkMode() {
    document.documentElement.classList.remove('dark');
    localStorage.setItem('theme', 'light');
    toggleCircle.classList.remove('translate-x-6');
    sunIcon.classList.remove('scale-0');
    moonIcon.classList.add('scale-0');
  }

  // Load theme from local storage
  if (localStorage.getItem('theme') === 'dark') {
    enableDarkMode();
  } else {
    disableDarkMode();
  }

  // Toggle Dark Mode on Click
  darkModeToggle.addEventListener('click', () => {
    if (document.documentElement.classList.contains('dark')) {
      disableDarkMode();
    } else {
      enableDarkMode();
    }
  });
</script>
