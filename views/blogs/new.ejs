<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      src="https://cdn.tiny.cloud/1/lc69uvdgzdmy12x9k70w8diqldhmdteivxioy0lq1zkiio6x/tinymce/7/tinymce.min.js"
      referrerpolicy="origin"
    ></script>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <h1>Create New Blog</h1>

    <form
      action="/blogs"
      method="POST"
      onsubmit="tinymce.get('content').save();"
    >
      <label for="title">Title</label>
      <input type="text" id="title" name="title" required />

      <label for="content">Content</label>
      <textarea id="content" name="content"></textarea>

      <button type="submit">Create Blog</button>
    </form>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        tinymce.init({
          selector: '#content', // Initialize TinyMCE on the 'content' textarea
          menubar: true,
          branding: false,
          plugins: 'link image lists table code', // Remove 'spellchecker' if not needed
          toolbar:
            'undo redo | styleselect | formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link image',

          setup: function (editor) {
            editor.on('init', function () {
              // After TinyMCE is initialized, hide the original textarea and make it ready for form submission
              var textarea = document.getElementById('content');
              textarea.style.display = 'none'; // Ensure the original textarea is hidden
              textarea.removeAttribute('aria-hidden'); // Remove the 'aria-hidden' attribute if it exists
            });
          },
        });
      });
    </script>
  </body>
</html>
